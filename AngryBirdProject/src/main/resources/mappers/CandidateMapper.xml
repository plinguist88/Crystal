<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CandidateMapper">
<cache />
	<!-- 여기저기서 편하게 쓰려고 -->
	<sql id="basecolumn1">
		participant_num, participant_name, participant_birth, participant_gender, participant_phone, 
		participant_addr, participant_date, audition_seq, original_file_name, store_file_name, file_size
	</sql>
	
		<!-- select할 때 쓰는 문구 -->
	<resultMap type="Model.DTO.CandidateDTO" id="baseCan">
	    <id column="participant_num" jdbcType="VARCHAR" property="candidateNum" />
		<result column="participant_name" jdbcType="VARCHAR" property="candidateName"/>
		<result column="participant_birth" jdbcType="VARCHAR" property="candidateBirth"/>
		<result column="participant_gender" jdbcType = "VARCHAR" property="candidateGender"/>
		<result column="participant_phone" jdbcType="VARCHAR" property="candidatePh"/>
		<result column="participant_addr" jdbcType="VARCHAR" property="candidateAddr"/>
		<result column="participant_date" jdbcType="TIMESTAMP" property="candidateDate"/>		
		<result column="audition_seq" jdbcType="INTEGER" property="auditionSeq"/>		
		<result column="original_file_name" jdbcType="VARCHAR" property="originalFilename"/>
		<result column="store_file_name" jdbcType="VARCHAR" property="storeFilename"/>
		<result column="file_size" jdbcType="INTEGER" property="fileSize"/>
		<result column="video_score" jdbcType="VARCHAR" property="videoScore"/>
		<result column="dance_diff_score" jdbcType="VARCHAR" property="danceDiffScore"/>
		<result column="dance_rythm_score" jdbcType="VARCHAR" property="danceRythmScore"/>
		<result column="dance_stage_score" jdbcType="VARCHAR" property="danceStageScore"/>
		<result column="song_choice_score" jdbcType="VARCHAR" property="songChoiceScore"/>
		<result column="song_pitch_score" jdbcType="VARCHAR" property="songPitchScore"/>
		<result column="song_vib_score" jdbcType="VARCHAR" property="songVibScore"/>
		<result column="appearance_score" jdbcType="VARCHAR" property="appScore"/>
		<result column="strength_score" jdbcType="VARCHAR" property="strengthScore"/>
		<result column="global_score" jdbcType="VARCHAR" property="globalScore"/>
		<result column="total_score" jdbcType="VARCHAR" property="totalScore"/>
		<result column="employee_num" jdbcType="VARCHAR" property="employeeNum"/>
	</resultMap>
	
	<resultMap type="Model.DTO.AuditionDTO" id="baseAud">
	    <id column="AUDITION_SEQ" jdbcType="INTEGER" property="auditionSeq" />
		<result column="AUDITION_NUM" jdbcType="INTEGER" property="auditionNo"/>
		<result column="EMPLOYEE_NUM" jdbcType="VARCHAR" property="employeeNum"/>
		<result column="AUDITION_STARTDATE" jdbcType = "VARCHAR" property="startDate"/>
		<result column="AUDITION_ENDDATE" jdbcType="VARCHAR" property="endDate"/>
		<result column="AUDITION_GATHER" jdbcType="INTEGER" property="gather"/>
		<result column="AUDITION_PASSED" jdbcType="INTEGER" property="passed"/>
		<result column="AUDITION_TYPE" jdbcType="VARCHAR" property="type"/>
		<result column="AUDITION_TITLE" jdbcType="VARCHAR" property="title"/>
		<result column="AUDITION_CONTENT" jdbcType="VARCHAR" property="content"/>
		<result column="AUDITION_UPLOAD_DATE" jdbcType="TIMESTAMP" property="uploadDate"/>
	</resultMap>	
	
	
	
	
	<insert id="registerCandidate" >
		insert into PARTICIPANT( <include refid="basecolumn1" /> ) 
		values( #{candidateNum}, #{candidateName},#{candidateBirth},#{candidateGender},#{candidatePh},
				#{candidateAddr}, sysdate, #{auditionSeq}, #{originalFilename}, #{storeFilename}, #{fileSize})
	</insert>
	
	<!-- join 하다 말음 -->
	<select id = "candidateList" parameterType= "Model.DTO.CandidateDTO" resultMap="baseCan">
		select 	
		p.participant_num, p.participant_name, p.participant_birth, p.participant_gender, p.participant_phone, 
		p.participant_addr, p.participant_date, p.audition_seq, p.original_file_name, p.store_file_name, p.file_size,
		a.AUDITION_STARTDATE, a.AUDITION_ENDDATE, a.AUDITION_GATHER, a.AUDITION_TYPE, a.AUDITION_TITLE. a.AUDITION_CONTENT

		from PARTICIPANT p, AUDITION a
		where p.audition_seq = a.audition_seq 
		and a.audition_seq = #{auditionSeq}	
	</select>
	
	
	
	
</mapper>